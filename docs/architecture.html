<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>BucketPulse</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="site-header">
      <div class="container header-inner">
        <div class="brand">
          <div class="brand__logo-placeholder"></div>
          <span class="brand__name">BucketPulse</span>
        </div>
        <nav class="main-nav">
          <a href="/index.html">Home</a>
          <!-- <a href="#why">Why BucketPulse</a> -->
          <a href="/product.html">Product</a>
          <a href="/architecture.html">Architecture</a>
          <a href="/use-cases.html">Use cases</a>
          <a href="https://github.com/" target="_blank">GitHub</a>
        </nav>
        <div class="header-cta">
          <a href="#" class="btn btn--primary">Deploy with CDK</a>
        </div>
      </div>
    </header>
    <main>
      <!-- Architecture hero / intro -->
      <section id="arch-hero" class="section section--hero">
        <div class="container arch-hero">
          <div class="arch-hero__text">
            <h1 class="arch-hero__title">BucketPulse architecture</h1>
            <p class="arch-hero__subtitle">
              A small, AWS-native stack built on top of S3 Metadata Tables,
              Athena, Lambda, and DynamoDB&mdash;no EC2, no containers, no
              manual scaling.
            </p>
          </div>
        </div>
      </section>

      <!-- 1. High-level diagram -->
      <section id="diagram" class="section section--alt">
        <div class="container">
          <div class="section-header">
            <h2 class="section-title">High-level flow</h2>
            <p class="section-subtitle">
              At a glance: S3 writes metadata into managed tables, Athena +
              Lambda compute health metrics, and a thin API layer powers the UI.
            </p>
          </div>

          <div class="arch-diagram">
            <svg
              class="arch-diagram__image"
              viewBox="0 0 800 320"
              xmlns="http://www.w3.org/2000/svg"
              aria-labelledby="arch-diagram-title arch-diagram-desc"
              role="img"
            >
              <title id="arch-diagram-title">
                BucketPulse high-level architecture
              </title>
              <desc id="arch-diagram-desc">
                S3 at the center writing to S3 Metadata Tables. Athena and
                Lambda above computing metrics. API Gateway and UI in front
                consuming the metrics.
              </desc>

              <!-- Background -->
              <defs>
                <linearGradient id="arch-bg" x1="0" y1="0" x2="1" y2="1">
                  <stop offset="0%" stop-color="#0f172a" />
                  <stop offset="100%" stop-color="#020617" />
                </linearGradient>
              </defs>
              <rect
                x="0"
                y="0"
                width="800"
                height="320"
                fill="url(#arch-bg)"
                rx="24"
              />

              <!-- ========== CORE BLOCKS ========== -->

              <!-- S3 bucket (center) -->
              <g>
                <rect
                  x="330"
                  y="125"
                  width="140"
                  height="80"
                  rx="14"
                  fill="#020617"
                  stroke="#38bdf8"
                  stroke-width="1.5"
                />
                <!-- bucket icon -->
                <!-- <path
                  d="M365 150h70"
                  stroke="#e5e7eb"
                  stroke-width="1.6"
                  stroke-linecap="round"
                  fill="none"
                />
                <path
                  d="M372 150v28M428 150v28M372 178h56"
                  stroke="#e5e7eb"
                  stroke-width="1.6"
                  stroke-linecap="round"
                  fill="none"
                /> -->
                <!-- S3 bucket icon (rim + body + base + fill line) -->
                <!-- Top rim (front edge) -->
                <path
                  d="M365 150
     Q400 142 435 150"
                  stroke="#e5e7eb"
                  stroke-width="1.6"
                  stroke-linecap="round"
                  fill="none"
                />
                <!-- Top rim (back edge, slightly inset) -->
                <path
                  d="M369 152
     Q400 146 431 152"
                  stroke="#e5e7eb"
                  stroke-width="1.2"
                  stroke-linecap="round"
                  fill="none"
                />

                <!-- Left side (slightly flared) -->
                <path
                  d="M372 152
     C369 164 370 176 375 182"
                  stroke="#e5e7eb"
                  stroke-width="1.6"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  fill="none"
                />

                <!-- Right side (mirror) -->
                <path
                  d="M428 152
     C431 164 430 176 425 182"
                  stroke="#e5e7eb"
                  stroke-width="1.6"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  fill="none"
                />

                <!-- Base ellipse -->
                <path
                  d="M375 182
     Q400 188 425 182"
                  stroke="#e5e7eb"
                  stroke-width="1.6"
                  stroke-linecap="round"
                  fill="none"
                />

                <text
                  x="400"
                  y="197"
                  text-anchor="middle"
                  fill="#e5e7eb"
                  font-size="13"
                  font-family="system-ui, -apple-system, BlinkMacSystemFont, 'SF Pro Text', sans-serif"
                >
                  S3 bucket
                </text>
              </g>

              <!-- S3 Metadata Tables (left) -->
              <g>
                <rect
                  x="80"
                  y="110"
                  width="160"
                  height="120"
                  rx="14"
                  fill="#020617"
                  stroke="#64748b"
                  stroke-width="1.5"
                />
                <rect
                  x="96"
                  y="128"
                  width="128"
                  height="20"
                  rx="5"
                  fill="#0b1220"
                  stroke="#1e293b"
                  stroke-width="1"
                />
                <rect
                  x="96"
                  y="154"
                  width="128"
                  height="20"
                  rx="5"
                  fill="#020617"
                  stroke="#1e293b"
                  stroke-width="1"
                />
                <rect
                  x="96"
                  y="180"
                  width="128"
                  height="20"
                  rx="5"
                  fill="#020617"
                  stroke="#1e293b"
                  stroke-width="1"
                />
                <text
                  x="160"
                  y="206"
                  text-anchor="middle"
                  fill="#e5e7eb"
                  font-size="12"
                  font-family="system-ui, -apple-system, BlinkMacSystemFont, 'SF Pro Text', sans-serif"
                >
                  S3 Metadata Tables
                </text>
                <text
                  x="160"
                  y="222"
                  text-anchor="middle"
                  fill="#94a3b8"
                  font-size="11"
                  font-family="system-ui, -apple-system, BlinkMacSystemFont, 'SF Pro Text', sans-serif"
                >
                  Inventory &amp; Journal
                </text>
              </g>

              <!-- Athena + Aggregation Lambda (top) -->
              <g>
                <rect
                  x="270"
                  y="10"
                  width="260"
                  height="106"
                  rx="14"
                  fill="#020617"
                  stroke="#64748b"
                  stroke-width="1.5"
                />
                <!-- Athena-ish icon -->
                <path
                  d="M375 39h24l-4 22h-16l-4-22z"
                  fill="#0b1220"
                  stroke="#38bdf8"
                  stroke-width="1.3"
                />
                <path
                  d="M382 48l4 4 8-10"
                  stroke="#22c55e"
                  stroke-width="1.3"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  fill="none"
                />
                <!-- Lambda-ish icon -->
                <!-- <path
                  d="M413 39l10 22h10l-10-22h-10z"
                  fill="#0b1220"
                  stroke="#f97316"
                  stroke-width="1.3"
                />
                <path
                  d="M417 55h7"
                  stroke="#f97316"
                  stroke-width="1.3"
                  stroke-linecap="round"
                  fill="none"
                /> -->
                <!-- Lambda-ish icon -->
                <g>
                  <!-- Outer badge / container -->
                  <path
                    d="M413 39l10 22h10l-10-22h-10z"
                    fill="#0b1220"
                    stroke="#f97316"
                    stroke-width="1.3"
                  />
                  <!-- Lambda stroke (diagonal legs) -->
                  <path
                    d="M409 61l5-12 6 12"
                    stroke="#f97316"
                    stroke-width="1.3"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    fill="none"
                  />
                  <!-- Base bar -->
                  <path
                    d="M409 61h11"
                    stroke="#f97316"
                    stroke-width="1.3"
                    stroke-linecap="round"
                    fill="none"
                  />
                </g>

                <text
                  x="310"
                  y="30"
                  fill="#e5e7eb"
                  font-size="13"
                  font-family="system-ui, -apple-system, BlinkMacSystemFont, 'SF Pro Text', sans-serif"
                >
                  Athena + Aggregation Lambda
                </text>
                <text
                  x="290"
                  y="79"
                  fill="#94a3b8"
                  font-size="10"
                  font-family="system-ui, -apple-system, BlinkMacSystemFont, 'SF Pro Text', sans-serif"
                >
                  Scheduled queries over metadata tables
                </text>
                <text
                  x="290"
                  y="95"
                  fill="#94a3b8"
                  font-size="10"
                  font-family="system-ui, -apple-system, BlinkMacSystemFont, 'SF Pro Text', sans-serif"
                >
                  Computes freshness, staleness &amp; age metrics
                </text>
              </g>

              <!-- Metrics Store (right) -->
              <g>
                <rect
                  x="555"
                  y="110"
                  width="170"
                  height="120"
                  rx="14"
                  fill="#020617"
                  stroke="#64748b"
                  stroke-width="1.5"
                />
                <rect
                  x="578"
                  y="132"
                  width="124"
                  height="18"
                  rx="4"
                  fill="#0b1220"
                  stroke="#1e293b"
                  stroke-width="1"
                />
                <rect
                  x="578"
                  y="156"
                  width="124"
                  height="18"
                  rx="4"
                  fill="#020617"
                  stroke="#1e293b"
                  stroke-width="1"
                />
                <rect
                  x="578"
                  y="180"
                  width="124"
                  height="18"
                  rx="4"
                  fill="#020617"
                  stroke="#1e293b"
                  stroke-width="1"
                />
                <text
                  x="640"
                  y="206"
                  text-anchor="middle"
                  fill="#e5e7eb"
                  font-size="12"
                  font-family="system-ui, -apple-system, BlinkMacSystemFont, 'SF Pro Text', sans-serif"
                >
                  Metrics store
                </text>
                <text
                  x="640"
                  y="222"
                  text-anchor="middle"
                  fill="#94a3b8"
                  font-size="11"
                  font-family="system-ui, -apple-system, BlinkMacSystemFont, 'SF Pro Text', sans-serif"
                >
                  DynamoDB summaries &amp; alerts
                </text>
              </g>

              <!-- API + UI (front bottom) -->
              <g>
                <rect
                  x="250"
                  y="230"
                  width="300"
                  height="70"
                  rx="14"
                  fill="#020617"
                  stroke="#64748b"
                  stroke-width="1.5"
                />
                <!-- API circle -->
                <circle
                  cx="280"
                  cy="262"
                  r="16"
                  fill="#0b1220"
                  stroke="#38bdf8"
                  stroke-width="1.4"
                />
                <path
                  d="M273 262h14"
                  stroke="#38bdf8"
                  stroke-width="1.4"
                  stroke-linecap="round"
                  fill="none"
                />
                <path
                  d="M280 255v14"
                  stroke="#38bdf8"
                  stroke-width="1.4"
                  stroke-linecap="round"
                  fill="none"
                />

                <!-- UI rectangle -->
                <rect
                  x="310"
                  y="246"
                  width="70"
                  height="32"
                  rx="6"
                  fill="#0b1220"
                  stroke="#1e293b"
                  stroke-width="1"
                />
                <rect
                  x="314"
                  y="252"
                  width="30"
                  height="4"
                  rx="2"
                  fill="#1e293b"
                />
                <rect
                  x="314"
                  y="260"
                  width="40"
                  height="4"
                  rx="2"
                  fill="#1e293b"
                />

                <text
                  x="390"
                  y="258"
                  fill="#e5e7eb"
                  font-size="13"
                  font-family="system-ui, -apple-system, BlinkMacSystemFont, 'SF Pro Text', sans-serif"
                >
                  API Gateway + Lambda
                </text>
                <text
                  x="390"
                  y="276"
                  fill="#94a3b8"
                  font-size="10"
                  font-family="system-ui, -apple-system, BlinkMacSystemFont, 'SF Pro Text', sans-serif"
                >
                  Angular SPA on S3 / CloudFront
                </text>
              </g>

              <!-- ========== ARROWS / FLOWS ========== -->

              <!-- S3 → Metadata Tables -->
              <path
                d="M330 165H250"
                stroke="#38bdf8"
                stroke-width="1.4"
                stroke-linecap="round"
                marker-end="url(#arrow-cyan)"
                fill="none"
              />

              <!-- Metadata Tables → Athena/Lambda -->
              <path
                d="M160 110V66H270"
                stroke="#38bdf8"
                stroke-width="1.4"
                stroke-linecap="round"
                marker-end="url(#arrow-cyan)"
                fill="none"
              />

              <!-- S3 → Athena/Lambda -->
              <path
                d="M400 125V116"
                stroke="#38bdf8"
                stroke-width="1.4"
                stroke-linecap="round"
                marker-end="url(#arrow-cyan)"
                fill="none"
              />

              <!-- Athena/Lambda → Metrics store -->
              <path
                d="M530 73H640V110"
                stroke="#22c55e"
                stroke-width="1.4"
                stroke-linecap="round"
                marker-end="url(#arrow-green)"
                fill="none"
              />

              <!-- Metrics store → API/UI (vertical into top edge) -->
              <path
                d="M640 230V260H550"
                stroke="#22c55e"
                stroke-width="1.4"
                stroke-linecap="round"
                marker-end="url(#arrow-green)"
                fill="none"
              />

              <!-- API/UI reading metrics (dashed back arrow) -->
              <path
                d="M430 230V210H555"
                stroke="#22c55e"
                stroke-width="1.2"
                stroke-linecap="round"
                stroke-dasharray="4 4"
                marker-end="url(#arrow-green)"
                fill="none"
              />

              <!-- Arrow markers -->
              <defs>
                <marker
                  id="arrow-cyan"
                  viewBox="0 0 10 10"
                  refX="8"
                  refY="5"
                  markerWidth="6"
                  markerHeight="6"
                  orient="auto-start-reverse"
                >
                  <path d="M0 0L10 5L0 10z" fill="#38bdf8" />
                </marker>
                <marker
                  id="arrow-green"
                  viewBox="0 0 10 10"
                  refX="8"
                  refY="5"
                  markerWidth="6"
                  markerHeight="6"
                  orient="auto-start-reverse"
                >
                  <path d="M0 0L10 5L0 10z" fill="#22c55e" />
                </marker>
              </defs>
            </svg>
          </div>
        </div>
      </section>

      <!-- 2. Core components -->
      <section id="components" class="section">
        <div class="container">
          <div class="section-header">
            <h2 class="section-title">Core components</h2>
            <p class="section-subtitle">
              The building blocks that turn S3 Metadata Tables into bucket and
              prefix health signals.
            </p>
          </div>

          <div class="grid grid--three arch-components">
            <article class="arch-card">
              <h3 class="arch-card__title">S3 Table Buckets</h3>
              <p class="arch-card__body">
                Inventory and journal tables generated by S3. BucketPulse never
                touches your objects directly; it reads metadata only.
              </p>
            </article>

            <article class="arch-card">
              <h3 class="arch-card__title">Aggregation Lambda</h3>
              <p class="arch-card__body">
                A scheduled function that queries inventory and journal tables
                via Athena to compute per-prefix metrics: freshness, staleness,
                and age histograms.
              </p>
            </article>

            <article class="arch-card">
              <h3 class="arch-card__title">Metrics store</h3>
              <p class="arch-card__body">
                DynamoDB tables that hold bucket and prefix summaries, alert
                records, and UI configuration for fast, low-latency reads.
              </p>
            </article>

            <article class="arch-card">
              <h3 class="arch-card__title">API layer</h3>
              <p class="arch-card__body">
                API Gateway + Lambda functions exposing /buckets, /health,
                /alerts, and /explorer endpoints to the UI and integrations.
              </p>
            </article>

            <article class="arch-card">
              <h3 class="arch-card__title">SPA + CDN</h3>
              <p class="arch-card__body">
                An Angular SPA hosted on S3 behind CloudFront. The UI loads
                runtime configuration from a lightweight env.json file.
              </p>
            </article>
          </div>
        </div>
      </section>

      <!-- 3. Security & auth -->
      <section id="security" class="section section--alt">
        <div class="container">
          <div class="section-header">
            <h2 class="section-title">Security &amp; auth</h2>
            <p class="section-subtitle">
              Designed for AWS-fluent teams: Cognito-based auth, principle of
              least privilege, and no direct access from the UI to Athena or S3
              tables.
            </p>
          </div>

          <div class="arch-security">
            <div class="arch-security__column">
              <h3 class="arch-security__title">Authentication</h3>
              <ul class="arch-security__list">
                <li>Cognito Hosted UI with PKCE out of the box.</li>
                <li>Support for external IdPs via Cognito federation.</li>
                <li>
                  Optionally replace with a custom authorizer/JWT provider.
                </li>
              </ul>
            </div>

            <div class="arch-security__column">
              <h3 class="arch-security__title">Data access</h3>
              <ul class="arch-security__list">
                <li>UI talks only to your API, never directly to Athena.</li>
                <li>
                  Athena and S3 table access restricted to aggregation Lambdas.
                </li>
                <li>
                  Fine-grained IAM roles for API handlers and metric readers.
                </li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <!-- 4. Deploy & operate -->
      <section id="operations" class="section">
        <div class="container">
          <div class="section-header">
            <h2 class="section-title">Deploy &amp; operate</h2>
            <p class="section-subtitle">
              Ship BucketPulse as a single CDK stack, keep everything
              serverless, and integrate alerts into your existing workflows.
            </p>
          </div>

          <div class="arch-ops">
            <div class="arch-ops__block">
              <h3 class="arch-ops__title">Deployment</h3>
              <ul class="arch-ops__list">
                <li>CDK stack for all core resources.</li>
                <li>One-command deploy script for dev/sandbox environments.</li>
                <li>No EC2, no containers, no manual autoscaling groups.</li>
              </ul>
            </div>

            <div class="arch-ops__block">
              <h3 class="arch-ops__title">Operations</h3>
              <ul class="arch-ops__list">
                <li>Scheduled aggregation Lambdas with CloudWatch metrics.</li>
                <li>
                  Integrations with SNS for alert fan-out to email/ChatOps.
                </li>
                <li>
                  Standard AWS logging and tracing for Lambdas and API calls.
                </li>
              </ul>
            </div>
          </div>
        </div>
      </section>
    </main>
  </body>
</html>
